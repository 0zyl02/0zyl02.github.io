<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>制作生日邀请函</title>
    <link rel="stylesheet" href="css/birth.css">
    <link rel="stylesheet" href="css/all.css">
    <style>
        body{
            overflow: auto;
        }
        .birth-box{
            display: none;
        }
        .upload-box p,span,input{
            font-size: .2rem;
        }
        .upload-box{
            font-size: 35px;
            padding: .7rem .2rem .3rem;
        }
        .upload-box img{
            width: 1rem;
            height: 1rem;
            /* display: block; */
        }
        input{
            width: 2.5rem;
        }
        br{
            line-height: 0rem;
        }
        #start-make{
            width: 1rem;
            font-size: .25rem;
            background: skyblue;
            color: #FFF;
            border-radius: .2rem;
            text-align: center;
            margin: 0 auto;
            margin-top: .2rem;
            padding: .1rem .2rem;
            display: block;
        }
        .show-box{
            font-size: .2rem;
            position: relative;
            z-index: 2;
        }
        .show-btn{
            font-size: .2rem;
            color: slateblue;
        }
        .show-box .show-img{
            width: 2.2rem;
            height: 3.5rem;
            position: absolute;
            top: -.5rem;
            left: 1rem;
            display: none;
        }
        .show-bg{
            width: 4rem;
            height: 12rem;
            background: rgba(0,0,0,0.3);
            position: fixed;
            top: 0;
            left: 0;
            display: none;
            z-index: 1;
        }
        .making{
            font-size: .3rem;
            display: none;
        }
        .making p{
            font-size: .5rem;
            text-align: center;
            color: blue;
            margin-top: 1rem;
        }
        
    </style>
</head>
<body>
    <p class="music-play">
        <audio class="play-btn" autoplay id="music1" hidden loop="loop">
            <source src="audio/birth.mp3" type="audio/mpeg">
        </audio>
        <img class="music-line" src="img/all/line.png" alt="">
    </p>
    <a class="home" href="index.html"></a>
    <div class="upload-box">
        <p>首页</p>
        <div class="show-bg"></div>
        <div class="show-box">
            <p class="show-btn">查看</p>
            <img class="show-img" src="img/birth/1.png" alt="">
        </div>
        <span>标题：</span><input class="animate1" type="text" value="欢迎参加某某某生日" name="id"><br>
        <span>介绍：</span><input class="birth-date1" type="text" value="2020年某月某日"><br>
        <span>图片：</span><input type="file" value="" class="upload-input">
        <img src="img/birth/birImg1.jpg" alt="" class="one-img1"><br>
        <p>第二页</p>
        <div class="show-box">
            <p class="show-btn">查看</p>
            <img class="show-img" src="img/birth/2.png" alt="">
        </div>
        <span>标题：</span><input class="two-title1" type="text" value="某某某的成长"><br>
        <span>图片1：</span><input class="upload-input" type="file" value="">
        <img src="img/birth/birImg1.jpg" alt="" class="birth-item11">
        <span>图片2：</span><input class="upload-input" type="file" value="">
        <img src="img/birth/birImg2.jpg" alt="" class="birth-item21">
        <span>图片3：</span><input class="upload-input" type="file">
        <img src="img/birth/birImg3.jpg" alt="" class="birth-item31"><br>
        <p>第三页</p>
        <div class="show-box">
            <p class="show-btn">查看</p>
            <img class="show-img" src="img/birth/3.png" alt="">
        </div>
        <span>介绍：</span><input class="three-title1" type="text" value="愿祝福萦绕着你,在你人生的缤纷之旅，在你永远与春天接壤的梦幻里，祝你心想事成，生日快乐！"><br>
        <span>图片：</span><input class="upload-input" type="file" value="">
        <img class="three-img1" src="img/birth/birImg1.jpg" alt="">
        <br>
        <p>第四页</p>
        <div class="show-box">
            <p class="show-btn">查看</p>
            <img class="show-img" src="img/birth/4.png" alt="">
        </div>
        <span>标题：</span><input class="invite-title1" type="text" value="诚挚邀请"><br>
        <span>称呼：</span><input class="invite-call1" type="text" value="亲爱的朋友："><br>
        <span>标题：</span><input class="invite-content1" type="text" value="本月20日是我的生日，我又长大了一岁。晚上8点，我诚心诚意邀请你来我家度过这欢乐地时光!和我一起玩，一起聊天，有了你在，这次我的生日会变得更加精彩!"><br>
        <span>标题：</span><input class="invite-name1" type="text" value="你的好朋友某某某"><br>
        <p>第五页</p>
        <div class="show-box">
            <p class="show-btn">查看</p>
            <img class="show-img" src="img/birth/5.png" alt="">
        </div>
        <span>图片：</span><input type="file" class="upload-input">
        <img class="five-address-img1" src="img/all/map.jpg" alt=""><br>
        <span>时间：</span><input class="birth-time1" type="text" value="时间：2020年某月某日"><br>
        <span>地址：</span><input class="birth-address1" type="text" value="地点：某某市某某街几号几号"><br>
        <a href="javascript:" id="start-make">开始制作</a>
    </div>
    <div class="alert">
        <p class="alert-question">是否确定使用这些内容制作?</p>
        <p class="alert-answer"><a onclick="getParams()" id="alert-yes">确定</a><a id="alert-no">再看看</a></p>
    </div>
</body>
</html>
<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/touch-0.2.14.min.js"></script>
<script src="js/birth.js"></script>
<script src="js/all.js"></script>
<script>
    function getParams(){
        $(".show-bg").hide()
        $(".alert").hide()
        var make = document.getElementById("alert-yes")
        var a1 = $(".animate1").val(),a2=$(".birth-date1").val(),a3= $(".one-img1").attr('src'),b1=$(".two-title1").val(),b2=$(".birth-item11").attr('src'),
            b3=$(".birth-item21").attr('src'),b4 = $(".birth-item31").attr('src'),c1 =$(".three-title1").val(),c2 = $(".three-img1").attr('src'),
            d1= $(".invite-title1").val(),d2=$(".invite-call1").val(),d3=$(".invite-content1").val(),d4=$(".invite-name1").val(),e1=$(".five-address-img1").attr('src'),
            e2=$(".birth-time1").val(),e3=$(".birth-address1").val()
        make.href="birthCard.html?name="+ $(".animate1").val()+"&a1="+a1+"&a2="+a2+"&a3="+a3+"&b1="+b1+"&b2="+b2+"&b3="+b3+"&b4="+b4+"&c1="+c1+"&c2="+c2+"&d1="+d1+"&d2="+d2+"&d3="+d3+"&d4="+d4+"&e1="+e1+"&e2="+e2+"&e3="+e3;
    }

    $(".upload-input").change(function(){
        let src = getObjectURL(this.files[0]);
        $(this).next('img').attr('src',src);
        $(this).next('img').css('display',"block");
    })
    
    //查看
    $(".show-btn").click(function(){
        $(".show-bg").show()
        $(this).parents(".show-box").find('.show-img').show()
    })
    $(".show-bg").click(function(){
        $(".show-img").hide()
        $(".show-bg").hide()
    })

// 判断浏览器是否支持 createObjectURL api
function getObjectURL(file) {  
    var url = null;   
    if (window.createObjectURL!=undefined) {  
        url = window.createObjectURL(file) ;  
    } else if (window.URL!=undefined) { // mozilla(firefox)  
        url = window.URL.createObjectURL(file) ;  
    } else if (window.webkitURL!=undefined) { // webkit or chrome  
        url = window.webkitURL.createObjectURL(file) ;  
    }  
    return url ;  
}

var formData = new FormData();
formData.append('photo', $('.upload-input')[0].files[0]);
//ajax请求
$.ajax({
            type: "post",
            url:  "https://0zyl02.github.io",
            data: formdata,
            dataType: 'json',
            processData: false, // 告诉jQuery不要去处理发送的数据
            contentType: false, // 告诉jQuery不要去设置Content-Type请求头
            xhrFields:{withCredentials:true},
            async: true,    //默认是true：异步，false：同步。
            success: function (data) {
                callback(data);
            },
            error: function (data) {
                layer.msg('请求异常');
            },
        });
</script>